{"version":3,"sources":["components/Wallet/Wallet.module.css","components/Owner/Forms.module.css","components/Aside/Aside.module.css","components/Owner/Message.module.css","App.module.css","components/Loader/Loader.module.css","components/AdminBtn/AdminBtn.module.css","components/Header/Header.module.css","img/logo.svg","components/Header/Header.js","components/Demo/Demo.js","components/Loader/Loader.js","components/Owner/SupplyManagement.js","components/Owner/Config.js","uax/index.js","uax/context.js","uax/proposal.js","uax/hooks.js","components/Owner/Message.js","components/Owner/index.js","components/Wallet/Wallet.js","components/Demo1/Demo1.js","components/AdminBtn/AdminBtn.js","components/Aside/Aside.js","App.js","index.js"],"names":["module","exports","Header","className","s","main","logo","to","title","logoImage","src","alt","width","menu","link","activeClassName","active","Demo","Loader","color","loader","style","fontSize","ProposeEventForm","inputHint","buttonCaption","account","eType","input","useRef","useAsyncFn","e","a","preventDefault","value","Number","current","isInteger","run","tx","console","log","address","error","proposeResult","propose","loadingBtn","buttonLoading","proposeBtn","button","onClick","block","type","placeholder","ref","loading","SupplyManagement","Config","defaultValue","readGetter","contract","name","params","runLocal","decoded","output","readPublic","wrapContract","ton","abi","keys","Account","client","signer","signerKeys","root","medium","statsResponse","supplyResponse","getTONBalance","rootBalance","totalSupply","Object","values","reduce","b","wallets","transfers","transferFee","supply","supplyBreakdown","claimedFee","totalFeeClaimed","accruedFee","tons","toString","getUAXBalance","balance","getBalance","hexBalance","parseInt","toFixed","uax","getStats","UAXABI","Repo","RepoABI","Console","ConsoleABI","EventLog","EventLogABI","Root","RootABI","Medium","MediumABI","TokenWallet","TokenWalletABI","OwnerWallet","OwnerWalletABI","libWebSetup","binaryURL","ton_","useBinaryLibrary","libWeb","TONUAXContext","createContext","TONUAXContextProvider","props","network","server_address","UAXSystem","UAXOwners","useAsync","owKeys","1","o1","2","o2","3","o3","ownersInfo","owners","ownerInfo","idx","clientId","ownerAddr","addr","ownerTWAddr","tokenWalletAddr","ownerKeys","wallet","Provider","UAXUser","UAXOwner","twAddr","undefined","owner","tw","children","eventTypes","4","5","lastProposalOnApproval","refresh","state","proposals","ledger","proposal","id","parsedProposal","created","Date","expire","author","hasSigs","reqSigs","useUAXSystem","useContext","Message","Owner","lastProposal","addressShort","slice","useState","expireIn","setExpireIn","useInterval","t","d","days","Math","floor","hours","padStart","minutes","seconds","getTimeLeftString","subscribe","eq","dst","OR","msg","decodeMessage","boc","m","retry","resolution","setResolution","disableVoting","setDisableVoting","btnApproveClassName","buttonvoted","btnRejectClassName","resolve","positive","res","message","buttondisabled","Wallet","label","uaxBalance","setUAXBalance","tonBalance","setTONBalance","useCopyToClipboard","copyToClipboard","then","subscribeMessages","now","toInput","valueInput","val","match","sendResult","send","sendBtn","wrapper","walletContainer","yadd","info","Demo1","useEffect","free","useOwner","useAsyncRetry","useCurrentProposal","isMyProposal","proposalPopup","Btn","caption","StatsRow","icon","child","classValue","valueLoading","statrow","childstatname","statname","unit","Aside","twTotal","owTotal","feeTotal","unallocated","stats","setStats","aside","App","page","desk","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8FACAA,EAAOC,QAAU,CAAC,QAAU,wBAAwB,gBAAkB,gCAAgC,OAAS,uBAAuB,KAAO,qBAAqB,MAAQ,sBAAsB,KAAO,qBAAqB,MAAQ,sBAAsB,MAAQ,sBAAsB,OAAS,uBAAuB,cAAgB,qD,mBCAxUD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,MAAQ,qBAAqB,OAAS,sBAAsB,cAAgB,mD,mBCA3HD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,MAAQ,qBAAqB,QAAU,uBAAuB,SAAW,wBAAwB,cAAgB,mDAAmD,IAAM,mBAAmB,KAAO,oBAAoB,MAAQ,qBAAqB,aAAe,8B,mBCAnTD,EAAOC,QAAU,CAAC,QAAU,yBAAyB,OAAS,wBAAwB,eAAiB,gCAAgC,YAAc,+B,mBCArJD,EAAOC,QAAU,CAAC,QAAU,qBAAqB,KAAO,kBAAkB,KAAO,kBAAkB,KAAO,oB,mBCA1GD,EAAOC,QAAU,CAAC,OAAS,yB,qstBCA3BD,EAAOC,QAAU,CAAC,OAAS,2B,4DCA3BD,EAAOC,QAAU,CAAC,KAAO,qBAAqB,KAAO,qBAAqB,UAAY,0BAA0B,MAAQ,sBAAsB,KAAO,qBAAqB,KAAO,qBAAqB,OAAS,0CAA0C,IAAM,sB,8ICDhP,MAA0B,iC,OCsC1BC,MAlCf,WAEE,OACE,yBAAQC,UAAWC,IAAEC,KAArB,UACE,qBAAKF,UAAWC,IAAEE,KAAlB,SACE,6BACE,eAAC,IAAD,CAAMC,GAAG,IAAIJ,UAAWC,IAAEI,MAA1B,UACE,qBAAKL,UAAWC,IAAEK,UAAWC,IAAKJ,EAAMK,IAAI,OAAOC,MAAM,SAD3D,aAMJ,sBAAKT,UAAWC,IAAES,KAAlB,UAEE,cAAC,IAAD,CAASN,GAAG,QAAQJ,UAAWC,IAAEU,KAAMC,gBAAiBX,IAAEY,OAA1D,uBAGA,cAAC,IAAD,CAAST,GAAG,WAAWJ,UAAWC,IAAEU,KAAMC,gBAAiBX,IAAEY,OAA7D,qBAGA,cAAC,IAAD,CAAST,GAAG,WAAWJ,UAAWC,IAAEU,KAAMC,gBAAiBX,IAAEY,OAA7D,qBAGA,cAAC,IAAD,CAAST,GAAG,WAAWJ,UAAWC,IAAEU,KAAMC,gBAAiBX,IAAEY,OAA7D,qBAGA,cAAC,IAAD,CAAST,GAAG,OAAOJ,UAAWC,IAAEU,KAAMC,gBAAiBX,IAAEY,OAAzD,gCCVOC,MAjBf,WAEE,OACE,oCACE,kDACA,sBAAKd,UAAU,OAAf,UACE,qBAAKA,UAAU,YAAf,SACE,oBAAIA,UAAU,SAAd,iBAEF,qBAAKA,UAAU,YAAf,SACE,oBAAIA,UAAU,SAAd,wB,gECPKe,MAJf,YAAwC,IAAtBC,EAAqB,EAArBA,MAAqB,IAAdP,aAAc,MAAN,GAAM,EACrC,OAAO,qBAAKT,UAAS,UAAKC,IAAEgB,OAAP,qBAAkCC,MAAO,CAAET,QAAOU,SAAUV,EAAOO,MAAOA,M,QCEjG,SAASI,EAAT,GAAyE,IAA7CC,EAA4C,EAA5CA,UAAWC,EAAiC,EAAjCA,cAAeC,EAAkB,EAAlBA,QAASC,EAAS,EAATA,MACvDC,EAAQC,mBADwD,EAGrCC,YAAU,uCAAC,WAAOC,GAAP,iBAAAC,EAAA,yDAC1CD,EAAEE,iBADwC,SAGpCC,EAAQC,OAAOP,EAAMQ,QAAQF,OAC5BC,OAAOE,UAAUH,MAAWA,GAAS,GAJF,iEAOzBR,EAAQY,IAAI,UAAW,CAAEX,MAAOA,EAAOO,MAAOA,IAPrB,cAOpCK,EAPoC,OASxCX,EAAMQ,QAAQF,MAAQ,GACtBM,QAAQC,IAAR,yBAA8Bf,EAAQgB,QAAtC,mBAAwDf,EAAxD,kBAAuEO,GAASK,GAVxC,kBAWjCA,GAXiC,kCAcxCC,QAAQG,MAAR,MAdwC,0DAAD,sDAgBxC,CAACjB,EAASC,IAnByD,mBAG/DiB,EAH+D,KAGhDC,EAHgD,KAqBhEC,EAAa,wBAAQ3C,UAAWC,IAAE2C,cAArB,SAAoC,cAAC,EAAD,MACjDC,EAAa,wBAAQ7C,UAAWC,IAAE6C,OAAQC,QAASL,EAAtC,SAAgDpB,IACnE,OACE,uBAAMtB,UAAWC,IAAE+C,MAAnB,UAEE,uBACEhD,UAAWC,IAAEwB,MACbwB,KAAK,OACLC,YAAa7B,EACb8B,IAAK1B,IAENgB,EAAcW,QAAUT,EAAaE,KA4C7BQ,MAtCf,YAAwC,IAAZ9B,EAAW,EAAXA,QAC1B,OACE,gCACE,cAACH,EAAD,CACEC,UAAU,WACVC,cAAc,OACdC,QAASA,EACTC,MAAO,IAET,cAACJ,EAAD,CACEC,UAAU,WACVC,cAAc,OACdC,QAASA,EACTC,MAAO,IAET,cAACJ,EAAD,CACEC,UAAU,cACVC,cAAc,WACdC,QAASA,EACTC,MAAO,IAET,cAACJ,EAAD,CACEC,UAAU,mBACVC,cAAc,UACdC,QAASA,EACTC,MAAO,IAET,cAACJ,EAAD,CACEC,UAAU,wBACVC,cAAc,eACdC,QAASA,EACTC,MAAO,QCtCA8B,MAhCf,WACE,OACE,8BACE,uBAAMtD,UAAWC,IAAE+C,MAAnB,UAEE,+CACA,uBACEhD,UAAWC,IAAEwB,MACbwB,KAAK,OACLC,YAAY,wBACZK,aAAa,OAEf,+CACA,uBACEvD,UAAWC,IAAEwB,MACbwB,KAAK,OACLC,YAAY,wBACZK,aAAa,MAEf,iDACA,uBACEvD,UAAWC,IAAEwB,MACbwB,KAAK,OACLC,YAAY,kBACZK,aAAa,c,iJCxBhB,SAAeC,EAAtB,oC,4CAAO,WAA0BC,EAAUC,GAApC,2BAAA7B,EAAA,6DAA0C8B,EAA1C,+BAAmD,GAAnD,SACSF,EAASG,SAASF,EAAMC,GADjC,uCAC0CE,QAAQC,QADlD,4C,sBAIA,SAAeC,EAAtB,oC,4CAAO,WAA0BN,EAAUC,GAApC,SAAA7B,EAAA,sEACS4B,EAASG,SAASF,EAAM,IADjC,mBACqDA,EADrD,yBACsCG,QAAQC,OAD9C,mD,sBAIA,SAASE,EAAaC,EAAK1B,EAAS2B,EAAKC,GAC9C,OAAO,IAAIC,UACT,CAAEF,OACF,CACE3B,UAAS8B,OAAQJ,EACjBK,OAAQH,EAAOI,qBAAWJ,GAAQ,O,4CAKjC,WAAwBK,EAAMC,GAA9B,qBAAA5C,EAAA,sEACuB2B,EAAWiB,EAAQ,YAD1C,cACCC,EADD,gBAEwBlB,EAAWiB,EAAQ,kBAF3C,cAECE,EAFD,gBAGqBC,GAAcJ,GAHnC,cAGCK,EAHD,OAICC,EAAcC,OAAOC,OAAOL,GAAgBM,QAAO,SAACpD,EAAGqD,GAAJ,OAAUlD,OAAOH,GAAKG,OAAOkD,MAJjF,kBAKE,CACLC,QAAST,EAAcS,QACvBC,UAAWV,EAAcU,UACzBC,YAAaX,EAAcW,YAE3BC,OAAQR,EACRS,gBAAiBZ,EACjBa,WAAYd,EAAce,gBAE1BC,WAAYhB,EAAcgB,WAC1BC,KAAMd,EAAYe,aAff,6C,sBAmBP,IAAMC,GAAa,uCAAG,WAAMpC,GAAN,eAAA5B,EAAA,sEACE2B,EAAWC,EAAU,eADvB,cACdqC,EADc,yBAEbA,EAAQA,SAFK,2CAAH,sDAKblB,GAAa,uCAAG,WAAMnB,GAAN,eAAA5B,EAAA,sEACM4B,EAASsC,aADf,cACdC,EADc,2BAEXC,SAASD,EAAY,IAArB,SAA2B,GAAM,IAAGE,QAAQ,IAFjC,2CAAH,sDAQJC,GAFH,CAAEC,SA9BP,SAAP,qCA8BwBP,iBAAejB,kBC7BjCyB,GAAS,CACbC,KAAMC,EACNC,QAASC,EACTC,SAAUC,EACVC,KAAMC,EACNC,OAAQC,EACRC,YAAaC,EACbC,YAAaC,GAGfC,YAAY,CAEVC,UAAoC,oBAEtCC,YAAKC,iBAAiBC,KAGf,IAAMC,GAAgBC,0BAChBC,GAAwB,SAAAC,GACnC,IAAM3D,EAAM,IAAIqD,YAAK,CACnBO,QAAS,CACPC,eAAgB,iBAGdC,EAAY,CAChBzB,KAAMtC,EAAaC,EA9BV,qEA8BqBoC,GAAOC,MACrCE,QAASxC,EAAaC,EA9BV,qEA8BwBoC,GAAOG,SAC3CE,SAAU1C,EAAaC,EA9BV,qEA8ByBoC,GAAOK,UAC7CE,KAAM5C,EAAaC,EA9BV,qEA8BqBoC,GAAOO,MACrCE,OAAQ9C,EAAaC,EA9BV,qEA8BuBoC,GAAOS,SAO3C,IAAMkB,EAAYC,YAAQ,sBAAC,kDAAApG,EAAA,6DACrBqG,EAAS,CAAEC,EAAGC,EAAIC,EAAGC,EAAIC,EAAGC,GADP,SAEFzE,EAAWgE,EAAUnB,KAAM,WAFzB,OAKzB,IAHI6B,EAFqB,OAGrBC,EAAS,GAEb,MAAsB3D,OAAOC,OAAOyD,GAApC,eAASE,EAAwC,KAC3CC,EAAMD,EAAUE,SAChBC,EAAYH,EAAUI,KACtBC,EAAcL,EAAUM,gBACxBC,EAAYhB,EAAOU,GACnBnF,EAAWO,EAAaC,EAAK6E,EAAWzC,GAAOa,YAAagC,GAC5DC,EAASnF,EAAaC,EAAK+E,EAAa3C,GAAOW,YAAakC,GAChER,EAAOE,GAAO,CAAEnF,WAAU0F,UAZH,yBAclBT,GAdkB,2CAexB,IAcH,OACE,cAACjB,GAAc2B,SAAf,CAAwBrH,MAAO,CAAEkC,MAAK8D,YAAWsB,QAlCnD,SAAiB9G,EAAS4B,GACxB,OAAOH,EAAaC,EAAK1B,EAAS8D,GAAOW,YAAa7C,IAiCImF,SAb5D,YAAoC,IAAhBV,EAAe,EAAfA,IAAKW,EAAU,EAAVA,OACnBb,EAASV,EAAUjG,MACvB,IAAIiG,EAAU5E,QAAd,CAEA,QAAYoG,IAARZ,EACF,OAAOF,EAAOE,GAChB,QAAeY,IAAXD,EACF,cAAkBxE,OAAOC,OAAO0D,GAAhC,eAAyC,CAApC,IAAIe,EAAK,KACZ,GAAIA,EAAMC,GAAGnH,UAAYgH,EACvB,OAAOE,MAIb,SACG7B,EAAM+B,YCvFPC,GAAa,CACjBzB,EAAG,OACHE,EAAG,OACHE,EAAG,WACHsB,EAAG,SACHC,EAAG,YAIE,SAAeC,GAAtB,mC,8CAAO,WAAsCtF,GAAtC,uBAAA5C,EAAA,6DAEL4C,EAAOuF,UAFF,SAGiBjG,EAAWU,EAAQ,iBAHpC,UAVgB,IAafxC,EAHD,QAIOgI,MAJP,iEAOmBlG,EAAWU,EAAQ,cAPtC,cAOCyF,EAPD,iBAQgBnG,EAAWU,EAAQ,WARnC,eAQC0F,EARD,OAUCC,EAAWF,EAAUjI,EAAQoI,IAC7BC,EAAiB,CACrBD,GAAIrI,OAAOoI,EAAQ,IACnBnH,KAAM2G,GAAWQ,EAAQ,OACzBrI,MAAOC,OAAOoI,EAAQ,OAEtBG,QAAS,IAAIC,KAA6B,IAAxBJ,EAAQ,WAC1BK,OAAQ,IAAID,KAA8B,IAAzBJ,EAAQ,YAEzBM,OAAQP,EAAOC,EAAQ,OAAf,KACRO,QAAS3I,OAAOoI,EAAQ,SACxBQ,QAAS5I,OAAOoI,EAAQ,WArBrB,kBAuBEE,GAvBF,6C,sBCAA,SAASO,KAEd,OADsBC,qBAAWrD,IAAzBM,UC+EKgD,ICvFAC,GAFD,CAAE3H,mBAAkBC,SAAQyH,QDkB1C,YAAmD,IAAhCtB,EAA+B,EAA/BA,MAAewB,GAAgB,EAAxB9B,OAAwB,EAAhB8B,cAS1BlD,EAAY8C,KACZT,EAAWa,EAAalJ,MAExBQ,EAAU6H,EAASM,QAAU,GAC7BQ,EAAe3I,EAAQ4I,MAAM,EAAG,GAAK,QAAU5I,EAAQ4I,OAAO,GAbpB,EAehBC,mBAAS,IAfO,mBAezCC,EAfyC,KAe/BC,EAf+B,KAgBhDC,aAAY,kBAAMD,EA5BpB,SAA2BE,GACzB,IAAKA,EACH,MAAO,GACT,IACMC,GAAKD,EADC,IAAIhB,MACM,IAClBkB,EAAOC,KAAKC,MAAMH,EAAC,OACnBI,EAAQF,KAAKC,MAAOH,EAAC,MAAF,MAAkC7F,WAAWkG,SAAS,EAAG,KAC5EC,EAAUJ,KAAKC,MAAOH,EAAC,KAAiB,IAAK7F,WAAWkG,SAAS,EAAG,KACpEE,EAAUL,KAAKC,MAAOH,EAAK,IAAM7F,WAAWkG,SAAS,EAAG,KAC5D,MAAM,GAAN,OAAUJ,EAAV,iBAAuBG,EAAvB,YAAgCE,EAAhC,YAA2CC,GAmBbC,CAAkB7B,EAASK,WAAU,KAEnExC,YAAQ,sBAAC,4BAAApG,EAAA,6DACH4C,EAASsD,EAAUjB,OACvBzE,QAAQC,IAAI,kBAAmB,IAAIkI,KAAQf,GAFpC,SAGMA,EAAMyC,UACjB,WACA,CACE3L,IAAK,CAAE4L,GAAI1H,EAAOlC,SAAW6J,IAAK,CAAED,GAAI1C,EAAMlH,SAC9C8J,GAAI,CACF9L,IAAK,CAAE4L,GAAI1C,EAAMlH,SAAW6J,IAAK,CAAED,GAAI1H,EAAOlC,WAGlD,iBARW,uCASX,WAAM+J,GAAN,eAAAzK,EAAA,6DACEQ,QAAQC,IAAI,kBAAmB,IAAIkI,MADrC,UAEkB8B,EAAIF,KAAO3H,EAAOlC,QAAWkC,EAASgF,GAAO8C,cAAcD,EAAIE,KAFjF,OAEMC,EAFN,OAGEpK,QAAQC,IAAIgK,EAAIjC,GAAGc,MAAM,EAAG,GAAImB,EAAI/L,IAAI4K,MAAM,EAAG,GAAI,KAAMmB,EAAIF,IAAIjB,MAAM,EAAG,GAAIsB,EAAE/I,KAAM+I,EAAE1K,OAC1FkJ,EAAayB,QAJf,2CATW,uDAHN,mFAkBN,CAACjD,IApC4C,MAsChB2B,mBAAS,MAtCO,gCAuCZA,mBAAS,OAvCG,mBAuCzCuB,EAvCyC,KAuC7BC,EAvC6B,OAwCNxB,oBAAS,GAxCH,mBAwCzCyB,EAxCyC,KAwC1BC,EAxC0B,KA0C1CC,EAAsC,YAAfJ,EAA4B1M,IAAE+M,YAAc/M,IAAE6C,OACrEmK,EAAqC,WAAfN,EAA2B1M,IAAE+M,YAAc/M,IAAE6C,OA3CzB,SA6CjCoK,EA7CiC,8EA6ChD,WAAuBC,GAAvB,eAAAtL,EAAA,6DACEiL,GAAiB,GACbM,EAAMD,EAAW,UAAY,SAFnC,SAGqB1D,EAAMtH,IAAIiL,EAAK,CAAE/C,GAAID,EAASC,KAHnD,cAIEuC,EAAcQ,GAJhB,4CA7CgD,sBAoDhD,OACE,sBAAKpN,UAAWC,IAAEoN,QAAlB,UACE,iCACE,4BAAInC,IADN,gBACoC,4BAtDd,CACxB,KAAQ,OACR,KAAQ,OACR,SAAY,WACZ,OAAU,mBACV,SAAY,gBAiDgDd,EAASnH,QACjE,sBAAMjD,UAAU,QAAhB,SAAyBoK,EAASrI,WAGpC,uBAAM/B,UAAU,mBAAhB,uBAA8CqL,KAC9C,uBAAMrL,UAAU,QAAhB,qBAAiCoK,EAASO,QAA1C,IAAoDP,EAASQ,WAE7D,qBACE5K,UAAS,UAAK+M,EAAL,YAA4BF,EAAgB5M,IAAEqN,eAAiB,IACxEvK,QAAO,sBAAE,sBAAAlB,EAAA,sEAAkBqL,GAAQ,GAA1B,mFAFX,SAE4D,YAAfP,EAA2B,cAAC,EAAD,CAAQlM,MAAO,GAAIO,MAAO,YAAgB,YAClH,qBACEhB,UAAS,UAAKiN,EAAL,YAA2BJ,EAAgB5M,IAAEqN,eAAiB,IACvEvK,QAAO,sBAAE,sBAAAlB,EAAA,sEAAkBqL,GAAQ,GAA1B,mFAFX,yB,6BESSK,OAnFf,YAAqC,IAAnBC,EAAkB,EAAlBA,MAAOjM,EAAW,EAAXA,QAAW,EACE6J,mBAAS,IADX,mBAC3BqC,EAD2B,KACfC,EADe,OAEEtC,mBAAS,IAFX,mBAE3BuC,EAF2B,KAEfC,EAFe,OAGNC,eAAnBC,EAHyB,oBAKlC7F,YAAQ,sBAAC,sBAAApG,EAAA,6DAEPsE,GAAIN,cAActE,GAASwM,KAAKL,GAChCvH,GAAIvB,cAAcrD,GAASwM,KAAKH,GAHzB,SAIMrM,EAAQyM,kBAAkB,UAAU,SAAA1B,GAC/C/K,EAAQyI,UACR3H,QAAQC,IAAI,mBAAoBkI,KAAKyD,MAAO1L,EAAS+J,GACrDnG,GAAIN,cAActE,GAASwM,KAAKL,GAChCvH,GAAIvB,cAAcrD,GAASwM,KAAKH,MAR3B,mFAUN,CAACrM,IAEJ,IAAM2M,EAAUxM,mBACVyM,EAAazM,mBAlBe,EAmBPC,YAAU,uCAAC,WAAOC,GAAP,mBAAAC,EAAA,yDACpCD,EAAEE,iBADkC,SAG9B1B,EAAK8N,EAAQjM,QAAQF,MACrBqM,EAAMpM,OAAOmM,EAAWlM,QAAQF,OAC/B3B,EAAGiO,MAAM,wBAA2BrM,OAAOE,UAAUkM,IAAUA,EAAM,EALxC,iEAQnB7M,EAAQY,IAAI,qBAAsB,CAAE/B,GAAIA,EAAIgO,IAAKA,IAR9B,cAQ9BhM,EAR8B,OAUlCC,QAAQC,IAAR,4BAAiCf,EAAQgB,QAAzC,gBAAwDnC,EAAxD,gBAAkEgO,GAAOhM,GACzE8L,EAAQjM,QAAQF,MAAQ,GACxBoM,EAAWlM,QAAQF,MAAQ,GAZO,kBAa3BK,GAb2B,kCAgBlCC,QAAQG,MAAR,MAhBkC,0DAAD,sDAkBlC,CAACjB,IArC8B,mBAmB3B+M,EAnB2B,KAmBfC,EAnBe,KAuC5BhM,EAAUhB,EAAQgB,QAClB2I,EAAe3I,EAAQ4I,MAAM,EAAG,GAAK,QAAU5I,EAAQ4I,OAAO,GAE9DxI,EAAa,wBAAQ3C,UAAWC,KAAE2C,cAArB,SAAoC,cAAC,EAAD,MACjD4L,EAAU,wBAAQxO,UAAWC,KAAE6C,OAAQC,QAASwL,EAAtC,kBAEhB,OACE,sBAAKvO,UAAWC,KAAEwO,QAAlB,UACE,sBAAKzO,UAAWC,KAAEyO,gBAAlB,UACE,mBACE1O,UAAS,UAAKC,KAAE0O,KAAP,WACT5L,QAAS,kBAAM+K,EAAgBvL,IAFjC,SAGG2I,IAEH,sBAAKlL,UAAWC,KAAEkJ,OAAlB,UACE,mBAAGnJ,UAAWC,KAAE2O,KAAhB,SAAuBpB,IACvB,sBAAKxN,UAAWC,KAAE8B,MAAlB,UACE,mBAAG/B,UAAS,QAAZ,SAAwByN,IACxB,mBAAGzN,UAAS,QAAZ,SAAwB2N,aAK9B,uBAAM3N,UAAWC,KAAE+C,MAAnB,UACE,uBAAOhD,UAAU,WAAjB,gBACA,uBACEA,UAAWC,KAAEwB,MACbwB,KAAK,OACLC,YAAY,QACZC,IAAK+K,IAEP,uBAAOlO,UAAU,SAAjB,oBACA,uBACEA,UAAWC,KAAEwB,MACbwB,KAAK,OACLC,YAAY,MACZC,IAAKgL,IAENG,EAAWlL,QAAUT,EAAa6L,SCnD5BK,OAhCf,YAAyB,IAAD,EAAPjG,EAAO,EAAPA,IAAO,EJWjB,SAAkBA,GAAM,IAEvBa,GAAQH,EADOwB,qBAAWrD,IAAxB6B,UACe,CAAEV,QAYzB,OAVAkG,qBAAU,WACR,OAAO,WACArF,IAGLA,EAAMhG,SAASsL,OACftF,EAAMN,OAAO4F,WAEd,CAACtF,IAEG,QAACA,QAAD,IAACA,OAAD,EAACA,EAAOhG,SAAR,OAAkBgG,QAAlB,IAAkBA,OAAlB,EAAkBA,EAAON,QIxBL6F,CAASpG,GADd,mBACfnF,EADe,KACL0F,EADK,KAEhBiB,EJ2BD,WACL,IAAMrC,EAAY8C,KAElB,OADiBoE,YAAa,sBAAC,sBAAApN,EAAA,sEAAkBkI,GAAuBhC,EAAUjB,QAAnD,mFAA4D,II7B1EoI,GAEjB7M,QAAQC,IAAR,2BAAgCsG,EAAhC,8BAAkDnF,QAAlD,IAAkDA,OAAlD,EAAkDA,EAAUlB,QAA5D,uBAA2E4G,QAA3E,IAA2EA,OAA3E,EAA2EA,EAAQ5G,UAEnF,IAAM4M,GAAe,UAAA/E,EAASrI,aAAT,eAAgB2I,WAAhB,OAA2BvB,QAA3B,IAA2BA,OAA3B,EAA2BA,EAAQ5G,SAElD6M,GADqBhF,EAAShH,SAAWgH,EAASrI,QAAUoN,GACvB,cAAC,GAAMpE,QAAP,CAAetB,MAAOhG,EAAU0F,OAAQA,EAAQ8B,aAAcb,IAEzG,OAAO,qCACJgF,EAEC3L,GAAY0F,GACZ,oCACE,wCAAWP,KACX,sBAAK5I,UAAU,OAAf,UACE,sBAAKA,UAAU,YAAf,UACE,oBAAIA,UAAU,SAAd,oBACA,cAAC,GAAD,CAAQwN,MAAK,gBAAW5E,GAAOrH,QAAS4H,OAE1C,sBAAKnJ,UAAU,YAAf,UACE,oBAAIA,UAAU,QAAd,2BACA,cAAC,GAAMqD,iBAAP,CAAwB9B,QAASkC,iB,wCCf9B4L,OAZf,YAA2B,IAAZC,EAAW,EAAXA,QAIb,OAEE,aADA,CACA,UAAQtP,UAAS,UAAKC,KAAE6C,OAAP,YAHN,QAGM,YAAmC,YAAmBG,KAAK,SAA5E,SACGqM,KCEP,SAASC,GAAT,GAA2D,IAAvC7L,EAAsC,EAAtCA,KAAM3B,EAAgC,EAAhCA,MAAOyN,EAAyB,EAAzBA,KAAM7F,EAAmB,EAAnBA,SAAU8F,EAAS,EAATA,MACzCrM,EAAoB,OAAVrB,EACV2N,EAAU,UAAMzP,KAAE8B,MAAR,YAAiBqB,EAAO,2BAAuBnD,KAAE0P,cAAiB,IAClF,OAAO,qCACL,sBAAK3P,UAAWC,KAAE2P,QAAlB,UACE,mBAAG5P,UAAWyP,EAAQxP,KAAE4P,cAAgB5P,KAAE6P,SAA1C,SAAqDpM,IACrD,qBAAK1D,UAAS,UAAKwP,EAAL,YAAavP,KAAE8P,QAC7B,sBAAM/P,UAAW0P,EAAjB,UAA+BtM,GAAWrB,OAE3C4H,KAsEUqG,OAlEf,WAAkB,IAAD,EACW5E,mBAAS,CACjC9F,OAAQ,KACRC,gBAAiB,CACf0K,QAAS,KACTC,QAAS,KACTC,SAAU,KACVC,YAAa,MAEfjL,QAAS,KACTC,UAAW,KACXM,WAAY,KACZF,WAAY,KACZG,KAAM,OAbO,mBACR0K,EADQ,KACDC,EADC,KAqBPvI,EAAc+C,qBAAWrD,IAAzBM,UASR,OANAwD,aAAY,WACVxD,EAAUnB,KAAKoD,UACfjC,EAAUjB,OAAOkD,UACjB7D,GAAIC,SAAS2B,EAAUnB,KAAMmB,EAAUjB,QAAQiH,KAAKuC,KACnD,KAGD,wBAAOtQ,UAAWC,KAAEsQ,MAApB,UACE,sBAAKvQ,UAAWC,KAAEoQ,MAAlB,UACE,4CACA,cAACd,GAAD,CAAU7L,KAAK,UAAU3B,MAAOsO,EAAMlL,UACtC,cAACoK,GAAD,CAAU7L,KAAK,YAAY3B,MAAOsO,EAAMjL,YACxC,cAACmK,GAAD,CAAU7L,KAAK,cAAc3B,MAAOsO,EAAMhL,YAAamK,KAAK,UAC5D,uBAEA,eAACD,GAAD,CAAU7L,KAAK,SAAS3B,MAAOsO,EAAM/K,OAAQkK,KAAK,QAAlD,UACE,cAACD,GAAD,CAAUE,OAAK,EAAC/L,KAAK,UAAU3B,MAAOsO,EAAM9K,gBAAgB6K,cAC5D,cAACb,GAAD,CAAUE,OAAK,EAAC/L,KAAK,YAAY3B,MAAOsO,EAAM9K,gBAAgB0K,UAC9D,cAACV,GAAD,CAAUE,OAAK,EAAC/L,KAAK,gBAAgB3B,MAAOsO,EAAM9K,gBAAgB4K,cAGpE,uBAEA,cAACZ,GAAD,CAAU7L,KAAK,aAAa3B,MAAOsO,EAAM7K,WAAYgK,KAAK,UAC1D,cAACD,GAAD,CAAU7L,KAAK,eAAe3B,MAAOsO,EAAM1K,KAAM6J,KAAK,aASxD,gCACE,qCACA,cAAC,GAAD,CAAKF,QAAQ,yBCrCNkB,OApCf,WACE,OACE,sBAAMxQ,UAAWC,IAAEwO,QAAnB,SACE,sBAAKzO,UAAWC,IAAEwQ,KAAlB,UACE,cAAC,EAAD,IACA,sBAAKzQ,UAAWC,IAAEC,KAAlB,UACE,cAAC,GAAD,IACA,qBAAKF,UAAWC,IAAEyQ,KAAlB,SAEE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,MAGlB,cAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,QAAlB,SACE,cAAC,EAAD,MAEF,cAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,WAAlB,SACE,cAAC,GAAD,CAAOhI,IAAK,MAEd,cAAC,IAAD,CAAO+H,OAAK,EAACC,KAAK,WAAlB,SACE,cAAC,GAAD,CAAOhI,IAAK,MAEd,cAAC,IAAD,CAAO+H,OAAK,EAACC,KAAK,WAAlB,SACE,cAAC,GAAD,CAAOhI,IAAK,MAEd,cAAC,IAAD,CAAO+H,OAAK,EAACC,KAAK,uBCzBhCC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,GAAD,UACE,cAAC,GAAD,UAINC,SAASC,eAAe,W","file":"static/js/main.b3726091.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Wallet_wrapper__3cURb\",\"walletContainer\":\"Wallet_walletContainer__1uZsj\",\"wallet\":\"Wallet_wallet__1Grsq\",\"info\":\"Wallet_info__YW5pO\",\"value\":\"Wallet_value__1ayvN\",\"yadd\":\"Wallet_yadd__yIG7m\",\"block\":\"Wallet_block__2TL5q\",\"input\":\"Wallet_input__eiXcK\",\"button\":\"Wallet_button__V7ThS\",\"buttonLoading\":\"Wallet_buttonLoading__24opq Wallet_button__V7ThS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"Forms_block__n36_M\",\"input\":\"Forms_input__3GH7Q\",\"button\":\"Forms_button__1G6iO\",\"buttonLoading\":\"Forms_buttonLoading__3JwuT Forms_button__1G6iO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"aside\":\"Aside_aside__1St8F\",\"stats\":\"Aside_stats__35-mK\",\"statrow\":\"Aside_statrow__3S5au\",\"statname\":\"Aside_statname__3cm0q\",\"childstatname\":\"Aside_childstatname__V39tL Aside_statname__3cm0q\",\"row\":\"Aside_row__up8dj\",\"unit\":\"Aside_unit__1S1A3\",\"value\":\"Aside_value__1aeVE\",\"valueLoading\":\"Aside_valueLoading__gVyV0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__R8Tf2\",\"button\":\"Message_button__6q37v\",\"buttondisabled\":\"Message_buttondisabled__SQC-G\",\"buttonvoted\":\"Message_buttonvoted__2idj5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"App_wrapper__2Rh_f\",\"page\":\"App_page__CKP-2\",\"desk\":\"App_desk__2dGs9\",\"main\":\"App_main__3ZkGI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__1j2Bs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"AdminBtn_button__1CAug\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Header_main__2r9vH\",\"logo\":\"Header_logo__3_SJs\",\"logoImage\":\"Header_logoImage__2KwYz\",\"title\":\"Header_title__3SH2Q\",\"menu\":\"Header_menu__BQHSW\",\"link\":\"Header_link__2wI74\",\"active\":\"Header_active__vmCnS Header_link__2wI74\",\"act\":\"Header_act__1iRYG\"};","export default __webpack_public_path__ + \"static/media/logo.240b99fe.svg\";","import s from './Header.module.css';\nimport logo from '../../img/logo.svg';\nimport { Link, NavLink } from 'react-router-dom';\n\nfunction Header() {\n\n  return (\n    <header className={s.main}>\n      <div className={s.logo}>\n        <h1>\n          <Link to=\"/\" className={s.title}>\n            <img className={s.logoImage} src={logo} alt=\"logo\" width=\"30px\" />\n            UAX\n          </Link>\n        </h1>\n      </div>\n      <div className={s.menu}>\n\n        <NavLink to=\"/user\" className={s.link} activeClassName={s.active}>\n          User-User\n        </NavLink>\n        <NavLink to=\"/owner/1\" className={s.link} activeClassName={s.active}>\n          Owner 1\n        </NavLink>\n        <NavLink to=\"/owner/2\" className={s.link} activeClassName={s.active}>\n          Owner 2\n        </NavLink>\n        <NavLink to=\"/owner/3\" className={s.link} activeClassName={s.active}>\n          Owner 3\n        </NavLink>\n        <NavLink to=\"/dev\" className={s.link} activeClassName={s.active}>\n          Don't touch\n        </NavLink>\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n","// import { useState, useContext } from 'react';\n\n\nfunction Demo() {\n\n  return (\n    <section>\n      <h2>User Wallet Demo</h2>\n      <div className=\"flex\">\n        <div className=\"container\">\n          <h3 className=\"i-card\">1</h3>\n        </div>\n        <div className=\"container\">\n          <h3 className=\"i-card\">2</h3>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nexport default Demo;\n","import s from './Loader.module.css';\n\nfunction Loader({ color, width = 20 }) {\n  return <div className={`${s.loader} i-cycle i-rotate`} style={{ width, fontSize: width, color: color }} />\n}\n\nexport default Loader;\n","import s from './Forms.module.css';\nimport Loader from '../Loader/Loader';\nimport { useRef } from 'react';\nimport { useAsyncFn } from 'react-use';\n\nfunction ProposeEventForm({ inputHint, buttonCaption, account, eType }) {\n  const input = useRef()\n\n  const [proposeResult, propose] = useAsyncFn(async (e) => {\n    e.preventDefault()\n    try {\n      let value = Number(input.current.value)\n      if (!Number.isInteger(value) || (value <= 0)) \n        return\n        \n      let tx = await account.run('propose', { eType: eType, value: value })\n\n      input.current.value = ''\n      console.log(`Proposal Sent (${account.address}) eType=${eType} value=${value}`, tx)\n      return tx\n    }\n    catch (err) {\n      console.error(err)\n    }\n  }, [account, eType])\n\n  const loadingBtn = <button className={s.buttonLoading}><Loader /></button>\n  const proposeBtn = <button className={s.button} onClick={propose}>{buttonCaption}</button>\n  return (\n    <form className={s.block}>\n      {/* <label>{inputLabel}</label> */}\n      <input\n        className={s.input}\n        type=\"text\"\n        placeholder={inputHint}\n        ref={input}\n      />\n      {proposeResult.loading ? loadingBtn : proposeBtn}\n    </form>\n  )\n}\n\n\nfunction SupplyManagement({ account }) {\n  return (\n    <div>\n      <ProposeEventForm\n        inputHint=\"Mint UAX\"\n        buttonCaption=\"Mint\"\n        account={account}\n        eType={1}\n      />\n      <ProposeEventForm\n        inputHint=\"Burn UAX\"\n        buttonCaption=\"Burn\"\n        account={account}\n        eType={2}\n      />\n      <ProposeEventForm\n        inputHint=\"Wihdraw UAX\"\n        buttonCaption=\"Withdraw\"\n        account={account}\n        eType={3}\n      />\n      <ProposeEventForm\n        inputHint=\"Set Transfer Fee\"\n        buttonCaption=\"Set Fee\"\n        account={account}\n        eType={4}\n      />\n      <ProposeEventForm\n        inputHint=\"Withdraw Transfer Fee\"\n        buttonCaption=\"Withdraw Fee\"\n        account={account}\n        eType={5}\n      />\n\n    </div>\n  );\n}\n\nexport default SupplyManagement;\n","import s from './Forms.module.css';\n// import Loader from '../Loader/Loader';\n\n\nfunction Config() {\n  return (\n    <div>\n      <form className={s.block}>\n        {/* <h3 className=\"i-proc\">Config</h3> */}\n        <label>InitialUAX</label>\n        <input\n          className={s.input}\n          type=\"text\"\n          placeholder=\"new users UAX balance\"\n          defaultValue=\"50\"\n        />\n        <label>InitialTON</label>\n        <input\n          className={s.input}\n          type=\"text\"\n          placeholder=\"new users TON balance\"\n          defaultValue=\"2\"\n        />\n        <label>ThresholdTON</label>\n        <input\n          className={s.input}\n          type=\"text\"\n          placeholder=\"min TON balance\"\n          defaultValue=\"1.5\"\n        />\n        \n      </form>\n    </div>\n  );\n}\n\nexport default Config;\n","import { Account } from '@tonclient/appkit';\nimport { signerKeys } from '@tonclient/core';\n\n\nexport async function readGetter(contract, name, params = {}) {\n  return (await contract.runLocal(name, params)).decoded.output\n}\n\nexport async function readPublic(contract, name) {\n  return (await contract.runLocal(name, {})).decoded.output[name]\n}\n\nexport function wrapContract(ton, address, abi, keys) {\n  return new Account(\n    { abi },\n    {\n      address, client: ton,\n      signer: keys ? signerKeys(keys) : null\n    }\n  )\n}\n\nexport async function getStats(root, medium) {\n  const statsResponse = await readGetter(medium, 'getStats')\n  const supplyResponse = await readGetter(medium, 'supplyImproved')\n  const rootBalance = await getTONBalance(root)\n  const totalSupply = Object.values(supplyResponse).reduce((a, b) => Number(a) + Number(b))\n  return {\n    wallets: statsResponse.wallets,\n    transfers: statsResponse.transfers,\n    transferFee: statsResponse.transferFee,\n\n    supply: totalSupply,\n    supplyBreakdown: supplyResponse,\n    claimedFee: statsResponse.totalFeeClaimed,\n\n    accruedFee: statsResponse.accruedFee,\n    tons: rootBalance.toString(),\n  }\n}\n\nconst getUAXBalance = async contract => {\n  const balance = await readGetter(contract, 'getFinances')\n  return balance.balance\n}\n\nconst getTONBalance = async contract => {\n  const hexBalance = (await contract.getBalance());\n  return +(parseInt(hexBalance, 16) / 10 ** 9).toFixed(2);\n}\n\n\nconst uax = { getStats, getUAXBalance, getTONBalance };\n\nexport default uax;\n\n","import { createContext } from 'react';\nimport { TonClient as ton_ } from '@tonclient/core';\nimport { libWeb, libWebSetup } from '@tonclient/lib-web';\n\nimport o1 from './ton-keys/ow1.keys.json'\nimport o2 from './ton-keys/ow2.keys.json'\nimport o3 from './ton-keys/ow3.keys.json'\nimport RepoABI from './ton-abi/Repo.abi.json'\nimport ConsoleABI from './ton-abi/Console.abi.json'\nimport EventLogABI from './ton-abi/EventLog.abi.json'\nimport RootABI from './ton-abi/Root.abi.json'\nimport MediumABI from './ton-abi/Medium.abi.json'\nimport TokenWalletABI from './ton-abi/TokenWallet.abi.json'\nimport OwnerWalletABI from './ton-abi/OwnerWallet.abi.json'\nimport { readGetter, readPublic, wrapContract } from '.';\nimport { useAsync } from 'react-use';\n\n\nconst REPO = \"0:18b1bf111050687482433565af5fe47febafe22132aa9fd27cdca8b8e0d75e9d\"\nconst CONSOLE = \"0:16aa946dfaa4bb991642e840754b754af8a5b07fe29d90579b48dcb09afa5453\"\nconst EVENTLOG = \"0:dc5a432c7173f1ee96429a806d33b550e3b8ac5159c90d90fc0e76c9c1af1238\"\nconst ROOT = \"0:510e83b7a659578f4b4c87289171d0fe16e8001930e44d4eca16d0520bd14cbe\"\nconst MEDIUM = \"0:9e1c4a632c058a9dadfc8d356a22aa246ffd267e80725e70e2be72e4098b0d39\"\nconst UAXABI = {\n  Repo: RepoABI,\n  Console: ConsoleABI,\n  EventLog: EventLogABI,\n  Root: RootABI,\n  Medium: MediumABI,\n  TokenWallet: TokenWalletABI,\n  OwnerWallet: OwnerWalletABI\n}\n\nlibWebSetup({\n  // debugLog: console.log,\n  binaryURL: process.env.PUBLIC_URL + \"/tonclient.wasm\",\n})\nton_.useBinaryLibrary(libWeb);\n\n\nexport const TONUAXContext = createContext();\nexport const TONUAXContextProvider = props => {\n  const ton = new ton_({\n    network: {\n      server_address: 'net.ton.dev'\n    }\n  })\n  const UAXSystem = {\n    Repo: wrapContract(ton, REPO, UAXABI.Repo),\n    Console: wrapContract(ton, CONSOLE, UAXABI.Console),\n    EventLog: wrapContract(ton, EVENTLOG, UAXABI.EventLog),\n    Root: wrapContract(ton, ROOT, UAXABI.Root),\n    Medium: wrapContract(ton, MEDIUM, UAXABI.Medium)\n  }\n\n  function UAXUser(address, keys) {\n    return wrapContract(ton, address, UAXABI.TokenWallet, keys)\n  }\n\n  const UAXOwners = useAsync(async () => {\n    let owKeys = { 1: o1, 2: o2, 3: o3 }\n    let ownersInfo = await readPublic(UAXSystem.Root, \"_owners\")\n    let owners = {}\n\n    for (let ownerInfo of Object.values(ownersInfo)) {\n      let idx = ownerInfo.clientId\n      let ownerAddr = ownerInfo.addr\n      let ownerTWAddr = ownerInfo.tokenWalletAddr\n      let ownerKeys = owKeys[idx]\n      let contract = wrapContract(ton, ownerAddr, UAXABI.OwnerWallet, ownerKeys)\n      let wallet = wrapContract(ton, ownerTWAddr, UAXABI.TokenWallet, ownerKeys)\n      owners[idx] = { contract, wallet }\n    }\n    return owners\n  }, [])\n\n  function UAXOwner({ idx, twAddr }) {\n    let owners = UAXOwners.value\n    if (UAXOwners.loading)\n      return\n    if (idx !== undefined)\n      return owners[idx]\n    if (twAddr !== undefined)\n      for (let owner of Object.values(owners)) {\n        if (owner.tw.address === twAddr)\n          return owner\n      }\n  }\n  return (\n    <TONUAXContext.Provider value={{ ton, UAXSystem, UAXUser, UAXOwner }}>\n      {props.children}\n    </TONUAXContext.Provider>\n  );\n};\n","import { readGetter, readPublic } from \".\"\n\nconst pendingStateID = 2\nconst eventTypes = {\n  1: \"mint\",\n  2: \"burn\",\n  3: \"withdraw\",\n  4: \"setfee\",\n  5: \"claimfee\"\n}\n\n\nexport async function lastProposalOnApproval(medium) {\n  // console.log('update last proposal')\n  medium.refresh()\n  const current = await readPublic(medium, \"_currentEvent\")\n  if (current.state != pendingStateID)\n    return\n\n  const proposals = await readPublic(medium, \"_proposals\")\n  const ledger = await readPublic(medium, \"_ledger\")\n\n  const proposal = proposals[current.id]\n  const parsedProposal = {\n    id: Number(proposal[\"id\"]),\n    type: eventTypes[proposal[\"eType\"]],\n    value: Number(proposal[\"value\"]),\n\n    created: new Date(proposal[\"createdAt\"] * 1000),\n    expire: new Date(proposal[\"validUntil\"] * 1000),\n\n    author: ledger[proposal[\"actor\"]][\"addr\"],\n    hasSigs: Number(proposal[\"signsAt\"]),\n    reqSigs: Number(proposal[\"signsReq\"])\n  }\n  return parsedProposal\n}\n","import { useContext, useEffect, useState } from 'react';\nimport { useAsyncRetry } from 'react-use';\n\nimport { TONUAXContext } from './context'\nimport { lastProposalOnApproval } from './proposal'\n\n\nexport function useTON() {\n  const { ton } = useContext(TONUAXContext)\n  return ton\n}\n\nexport function useUAXSystem() {\n  const { UAXSystem } = useContext(TONUAXContext)\n  return UAXSystem\n}\n\nexport function useOwner(idx) {\n  const { UAXOwner } = useContext(TONUAXContext)\n  const owner = UAXOwner({ idx })\n\n  useEffect(() => {\n    return () => {\n      if (!owner)\n        return\n      // console.log('free', owner)\n      owner.contract.free()\n      owner.wallet.free()\n    }\n  }, [owner])\n\n  return [owner?.contract, owner?.wallet]\n}\n\n\nexport function useCurrentProposal() {\n  const UAXSystem = useUAXSystem()\n  const proposal = useAsyncRetry(async () => await lastProposalOnApproval(UAXSystem.Medium), [])\n  return proposal\n}\n","import s from './Message.module.css';\nimport Loader from '../Loader'\nimport { useInterval, useAsync, useAsyncRetry } from 'react-use';\nimport { useState } from 'react';\n\nimport { useUAXSystem } from '../../uax/hooks';\n\n\n\nfunction getTimeLeftString(t) {\n  if (!t)\n    return \"\"\n  const now = new Date()\n  const d = (t - now) / 1000;\n  let days = Math.floor(d / (60 * 60 * 24));\n  let hours = Math.floor((d % (60 * 60 * 24)) / (60 * 60)).toString().padStart(2, \"0\")\n  let minutes = Math.floor((d % (60 * 60)) / (60)).toString().padStart(2, \"0\")\n  let seconds = Math.floor((d % (60))).toString().padStart(2, \"0\")\n  return `${days} days ${hours}:${minutes}:${seconds}`\n}\n\nfunction Message({ owner, wallet, lastProposal }) {\n  const eventTypesDisplay = {\n    \"mint\": \"mint\",\n    \"burn\": \"burn\",\n    \"withdraw\": \"withdraw\",\n    \"setfee\": \"set transfer fee\",\n    \"claimfee\": \"withdraw fee\"\n  }\n\n  const UAXSystem = useUAXSystem()\n  const proposal = lastProposal.value\n\n  const address = proposal.author || \"\"\n  const addressShort = address.slice(0, 5) + ' ... ' + address.slice(-3)\n\n  const [expireIn, setExpireIn] = useState(\"\")\n  useInterval(() => setExpireIn(getTimeLeftString(proposal.expire)), 1000)\n\n  useAsync(async () => {\n    let medium = UAXSystem.Medium\n    console.log('Owner.subscribe', new Date(), owner)\n    return await owner.subscribe(\n      \"messages\",\n      {\n        src: { eq: medium.address }, dst: { eq: owner.address },\n        OR: {\n          src: { eq: owner.address }, dst: { eq: medium.address }\n        }\n      },\n      \"id,boc,src,dst\",\n      async msg => {\n        console.log('Owner.onMessage', new Date())\n        let m = await ((msg.dst == medium.address) ? medium : owner).decodeMessage(msg.boc)\n        console.log(msg.id.slice(0, 5), msg.src.slice(0, 5), '->', msg.dst.slice(0, 5), m.name, m.value)\n        lastProposal.retry()\n      })\n  }, [owner])\n\n  const [lastSeen, setLastSeen] = useState(null)\n  const [resolution, setResolution] = useState(null)\n  const [disableVoting, setDisableVoting] = useState(false)\n\n  const btnApproveClassName = (resolution === \"approve\") ? s.buttonvoted : s.button\n  const btnRejectClassName = (resolution === \"reject\") ? s.buttonvoted : s.button\n\n  async function resolve(positive) {\n    setDisableVoting(true)\n    let res = positive ? \"approve\" : \"reject\"\n    let result = await owner.run(res, { id: proposal.id })\n    setResolution(res)\n  }\n\n  return (\n    <div className={s.message}>\n      <span>\n        <b>{addressShort}</b> proposed to <b>{eventTypesDisplay[proposal.type]}</b>\n        <span className=\"i-uax\">{proposal.value}</span>\n      </span>\n\n      <span className=\"i-cycle i-rotate\">Expire in {expireIn}</span>\n      <span className=\"i-eye\">Signed: {proposal.hasSigs}/{proposal.reqSigs}</span>\n\n      <div\n        className={`${btnApproveClassName} ${disableVoting ? s.buttondisabled : \"\"}`}\n        onClick={async () => await resolve(true)}>{resolution === \"approve\" ? <Loader width={10} color={'#000000'} /> : 'APPROVE'}</div>\n      <div\n        className={`${btnRejectClassName} ${disableVoting ? s.buttondisabled : \"\"}`}\n        onClick={async () => await resolve(false)}>REJECT</div>\n    </div>)\n}\n\nexport default Message;\n","import SupplyManagement from \"./SupplyManagement\";\nimport Config from './Config';\nimport Message from './Message';\nconst Owner = { SupplyManagement, Config, Message }\n\nexport default Owner\n","import s from './Wallet.module.css';\nimport Loader from '../Loader/Loader';\nimport { useRef, useState } from 'react';\nimport {\n  useAsync,\n  useAsyncFn,\n  useCopyToClipboard,\n} from 'react-use';\n\nimport uax from '../../uax';\n\n\nfunction Wallet({ label, account }) {\n  const [uaxBalance, setUAXBalance] = useState('')\n  const [tonBalance, setTONBalance] = useState('')\n  const [, copyToClipboard] = useCopyToClipboard()\n\n  useAsync(async () => {\n    // console.log('Wallet.subscribe', Date.now())\n    uax.getUAXBalance(account).then(setUAXBalance);\n    uax.getTONBalance(account).then(setTONBalance);\n    return await account.subscribeMessages(\"id,boc\", msg => {\n      account.refresh()\n      console.log('Wallet.onMessage', Date.now(), address, msg)\n      uax.getUAXBalance(account).then(setUAXBalance);\n      uax.getTONBalance(account).then(setTONBalance);\n    })\n  }, [account])\n\n  const toInput = useRef();\n  const valueInput = useRef();\n  const [sendResult, send] = useAsyncFn(async (e) => {\n    e.preventDefault()\n    try {\n      let to = toInput.current.value\n      let val = Number(valueInput.current.value)\n      if (!to.match(/^0:[a-fA-F0-9]{64}$/) || !Number.isInteger(val) || !(val > 0))\n        return\n\n      let tx = await account.run('instantTransferExt', { to: to, val: val })\n\n      console.log(`Transaction Sent (${account.address}) to=${to} val=${val}`, tx)\n      toInput.current.value = ''\n      valueInput.current.value = ''\n      return tx\n    }\n    catch (err) {\n      console.error(err)\n    }\n  }, [account])\n\n  const address = account.address\n  const addressShort = address.slice(0, 5) + ' ... ' + address.slice(-3)\n\n  const loadingBtn = <button className={s.buttonLoading}><Loader /></button>\n  const sendBtn = <button className={s.button} onClick={send}>Send</button>\n\n  return (\n    <div className={s.wrapper}>\n      <div className={s.walletContainer}>\n        <p\n          className={`${s.yadd} i-copy`}\n          onClick={() => copyToClipboard(address)}>\n          {addressShort}\n        </p>\n        <div className={s.wallet}>\n          <p className={s.info}>{label}</p>\n          <div className={s.value}>\n            <p className={`i-uax`}>{uaxBalance}</p>\n            <p className={`i-gas`}>{tonBalance}</p>\n          </div>\n        </div>\n\n      </div>\n      <form className={s.block}>\n        <label className=\"i-target\">To</label>\n        <input\n          className={s.input}\n          type=\"text\"\n          placeholder=\"0:...\"\n          ref={toInput}\n        />\n        <label className=\"i-card\">Amount</label>\n        <input\n          className={s.input}\n          type=\"text\"\n          placeholder=\"123\"\n          ref={valueInput}\n        />\n        {sendResult.loading ? loadingBtn : sendBtn}\n      </form>\n    </div>\n  );\n}\n\nexport default Wallet;\n","import Owner from '../Owner';\nimport Wallet from '../Wallet';\n\nimport { useOwner, useCurrentProposal } from '../../uax/hooks';\n\n\nfunction Demo1({ idx }) {\n  const [contract, wallet] = useOwner(idx)\n  const proposal = useCurrentProposal()\n\n  console.log(`render demo for o${idx}. contract: ${contract?.address} tw: ${wallet?.address}`)\n\n  const isMyProposal = proposal.value?.author === wallet?.address\n  const showProposalPopup = !proposal.loading && proposal.value && !isMyProposal\n  const proposalPopup = showProposalPopup && <Owner.Message owner={contract} wallet={wallet} lastProposal={proposal} />\n\n  return <>\n    {proposalPopup}\n    {\n      contract && wallet &&\n      <section>\n        <h2>Owner {idx}</h2>\n        <div className=\"flex\">\n          <div className=\"container\">\n            <h3 className=\"i-card\">Wallet</h3>\n            <Wallet label={`OWNER ${idx}`} account={wallet} />\n          </div>\n          <div className=\"container\">\n            <h3 className=\"i-uax\">Manage Supply</h3>\n            <Owner.SupplyManagement account={contract} />\n          </div>\n\n        </div>\n      </section>\n    }\n  </>\n}\n\nexport default Demo1;\n","import s from './AdminBtn.module.css';\n\nfunction Btn({ caption }) {\n  // const [wallet]\n  const loading = true;\n  const icon = \"i-bot\"\n  return (\n    // onClick={deployWallet} >\n    <button className={`${s.button} ${icon} ${loading ? \"i-rotate\" : \"\"}`} type=\"button\">\n      {caption}\n    </button>\n  );\n}\n\nexport default Btn;\n","import s from './Aside.module.css'\nimport Btn from '../AdminBtn'\nimport Loader from '../Loader'\n\nimport { useContext, useState } from 'react'\nimport { useInterval } from 'react-use'\n\nimport uax from '../../uax'\nimport { TONUAXContext } from '../../uax/context'\n\n\nfunction StatsRow({ name, value, icon, children, child }) {\n  const loading = value === null\n  const classValue = `${s.value} ${loading ? `i-cycle i-rotate ${s.valueLoading}` : \"\"}`\n  return <>\n    <div className={s.statrow}>\n      <p className={child ? s.childstatname : s.statname}>{name}</p>\n      <div className={`${icon} ${s.unit}`} />\n      <span className={classValue}>{!loading && value}</span>\n    </div>\n    {children}\n  </>\n}\n\nfunction Aside() {\n  const [stats, setStats] = useState({\n    supply: null,\n    supplyBreakdown: {\n      twTotal: null,\n      owTotal: null,\n      feeTotal: null,\n      unallocated: null,\n    },\n    wallets: null,\n    transfers: null,\n    accruedFee: null,\n    claimedFee: null,\n    tons: null,\n  })\n  // const [config, setConfig] = useState({\n  //   initTON: \"\",\n  //   initUAX: \"\",\n  //   warnTON: \"\",\n  //   transferFee: \"\",\n  // })\n  const { UAXSystem } = useContext(TONUAXContext)\n\n\n  useInterval(() => {\n    UAXSystem.Root.refresh()\n    UAXSystem.Medium.refresh()\n    uax.getStats(UAXSystem.Root, UAXSystem.Medium).then(setStats)\n  }, 1000)\n\n  return (\n    <aside className={s.aside}>\n      <div className={s.stats}>\n        <h2>Statistics</h2>\n        <StatsRow name=\"Wallets\" value={stats.wallets} />\n        <StatsRow name=\"Transfers\" value={stats.transfers} />\n        <StatsRow name=\"TransferFee\" value={stats.transferFee} icon=\"i-uax\" />\n        <br />\n\n        <StatsRow name=\"Supply\" value={stats.supply} icon=\"i-uax\">\n          <StatsRow child name=\"Reserve\" value={stats.supplyBreakdown.unallocated} />\n          <StatsRow child name=\"FreeFloat\" value={stats.supplyBreakdown.twTotal} />\n          <StatsRow child name=\"CollectedFees\" value={stats.supplyBreakdown.feeTotal} />\n\n        </StatsRow>\n        <br />\n\n        <StatsRow name=\"ClaimedFee\" value={stats.claimedFee} icon=\"i-uax\" />\n        <StatsRow name=\"RemainingGas\" value={stats.tons} icon=\"i-gas\" />\n      </div>\n      {/* <div className={s.stats}>\n        <h2>Settings</h2>\n        <StatsRow name=\"TransferFee\" value={config.transferFee} icon=\"i-uax\" />\n        <StatsRow name=\"InitialBalance\" value={config.initUAX} icon=\"i-uax\" />\n        <StatsRow name=\"InitialGas\" value={config.initTON} icon=\"i-gas\" />\n        <StatsRow name=\"GasReplenishThreshold\" value={config.warnTON} icon=\"i-gas\" />\n      </div> */}\n      <div>\n        <h2>Dev</h2>\n        <Btn caption=\"Create wallet\" />\n      </div>\n\n    </aside>\n  );\n}\n\nexport default Aside;\n","import s from './App.module.css';\nimport { Switch, Route } from 'react-router-dom';\n\nimport Header from './components/Header';\n\nimport Demo from './components/Demo';\nimport Demo1 from './components/Demo1';\nimport Aside from './components/Aside';\n\n\nfunction App() {\n  return (\n    <main className={s.wrapper}>\n      <div className={s.page}>\n        <Header />\n        <div className={s.main}>\n          <Aside></Aside>\n          <div className={s.desk}>\n\n            <Switch>\n              <Route exact path=\"/\">\n\n              </Route>\n              <Route exact path=\"/user\">\n                <Demo />\n              </Route>\n              <Route exact path=\"/owner/1\">\n                <Demo1 idx={1} />\n              </Route>\n              <Route exact path=\"/owner/2\">\n                <Demo1 idx={2} />\n              </Route>\n              <Route exact path=\"/owner/3\">\n                <Demo1 idx={3} />\n              </Route>\n              <Route exact path=\"/dev\">\n                \n              </Route>\n            </Switch>\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n}\n\nexport default App;\n","import 'modern-normalize/modern-normalize.css';\nimport './components/flex.css';\nimport './icons.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as Router } from 'react-router-dom';\nimport App from './App';\nimport { TONUAXContextProvider } from './uax/context';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <TONUAXContextProvider>\n        <App />\n      </TONUAXContextProvider>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}